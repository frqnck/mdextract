#!/usr/bin/env node

var mdextract = require('../index');
var argv = process.argv;

var showInternal = ~argv.indexOf('--internal');

readStdin(function (err, data) {
  var doc = mdextract(data);
  console.log(doc.toMarkdown({ showInternal: showInternal }));

  // console.log(JSON.stringify(doc, null, 2));
});

function readStdin(fn) {
  process.stdin.resume(); /* paused by default */
  process.stdin.setEncoding('utf8');

  var data = '';
  process.stdin.on('data', function(chunk) { data += chunk.toString(); });
  process.stdin.on('end', function() { fn(null, data); });
}
